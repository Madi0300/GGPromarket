import{p as e,a as u,v as $,w as y,O as q}from"./chunk-UH6JLGW7-BuU8Z2XH.js";import{L as b,C as A,D as L,u as F,a as H,b as C,P as R}from"./hooks-B-oP3_Sk.js";import{u as k,b as G,d as D}from"./apiSlise-CKyxjTQ5.js";import{t as X,a as I}from"./clientStates-VMKuwYU0.js";const Y="_header_4fqhq_1",E="_header__wrapper_4fqhq_12",B={header:Y,header__wrapper:E},O="_TopBar_1c58q_2",T="_City_1c58q_26",P="_Navigation__Nav_1c58q_46",J="_Navigation__Burger_1c58q_57",Q="_underlined_1c58q_78",p={TopBar:O,City:T,Navigation__Nav:P,Navigation__Burger:J,underlined:Q};function z(){const{data:n,error:i,isLoading:m,isSuccess:c}=k(null),r=c?n.currentLocation:"",s=c?n.callNumber:"";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:p.TopBar,children:[e.jsx(b,{}),e.jsx(U,{city:r}),e.jsx(A,{number:s}),e.jsx(K,{})]})})}function U({city:n="Москва"}){return e.jsx(e.Fragment,{children:e.jsxs("a",{className:p.City,href:"#",children:[e.jsx("img",{className:p.City__icon,src:"/GGPromarket/header/location-icon.svg"}),e.jsx("span",{className:p.underlined,children:n})]})})}function K(){const n=[{name:"Каталог",href:"/catalog"},{name:"Доставка",href:"/order"},{name:"Скидки",href:"/discounts"},{name:"Бренды",href:"/brands"},{name:"Контакты",href:"/contacts"}],[i,m]=u.useState(!1),[c,r]=u.useState({X:0,Y:0}),s=u.useRef(null),o=u.useRef(null);function l(_){if(_.preventDefault(),!o.current)return;const h=!i;if(h){const f=o.current.getBoundingClientRect();r({X:f.left+window.scrollX,Y:f.bottom+window.scrollY})}m(h)}return u.useEffect(()=>{if(!i)return;function _(h){var j,d;const f=h.target;(j=s.current)!=null&&j.contains(f)||(d=o.current)!=null&&d.contains(f)||m(!1)}return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[i]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:l,className:p.Navigation__Burger,ref:o,"aria-expanded":i,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(L,{position:"right",ref:s,items:n,cords:c,isOpen:i}),e.jsx("div",{className:p.Navigation__Nav,children:n.map(_=>e.jsx("a",{href:_.href,className:p.Navigation__item,children:_.name},_.name))})]})}const V="_HeaderMiddle_1ql5a_1",W="_HeaderMiddle__cartSum_1ql5a_6",Z="_Categories_1ql5a_19",ee="_Categories__title_1ql5a_51",te="_Categories__one_1ql5a_60",se="_Categories__burger_1ql5a_84",oe="_Categories__two_1ql5a_97",ne="_Categories__three_1ql5a_101",re="_Search_1ql5a_106",ae="_Search__form_1ql5a_126",ie="_Search__input_1ql5a_136",ce="_ActionButtons_1ql5a_144",le="_ActionButtons__button_1ql5a_177",_e="_ActionButtons__eliplse_1ql5a_183",de="_ActionButtons__button__notification__sum_1ql5a_188",ue="_LikedGoods_1ql5a_225",me="_LikedGoods__list_1ql5a_242",he="_LikedGoods__item_1ql5a_246",t={HeaderMiddle:V,HeaderMiddle__cartSum:W,Categories:Z,Categories__title:ee,Categories__one:te,Categories__burger:se,Categories__two:oe,Categories__three:ne,Search:re,Search__form:ae,Search__input:ie,ActionButtons:ce,ActionButtons__button:le,ActionButtons__eliplse:_e,ActionButtons__button__notification__sum:de,LikedGoods:ue,LikedGoods__list:me,LikedGoods__item:he};function fe(){const n=JSON.parse(localStorage.getItem("likes")||"[]"),i=JSON.parse(localStorage.getItem("cart")||"[]"),m=F(l=>l.clientState.likesButtonTouched);F(l=>l.clientState.likeTouched);const c=F(l=>l.clientState.cartButtonTouched),[r,s]=u.useState({like:{X:0,Y:0},cart:{X:0,Y:0}});let o=0;for(let l=0;l<i.length;l++){const{data:_,isSuccess:h}=G(i[l]);h&&(o+=_.price)}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.HeaderMiddle,children:[e.jsx(xe,{}),e.jsx(ge,{}),e.jsx(pe,{setButtonCords:s}),m?e.jsx(w,{cords:r.like,itemsId:n}):null,c?e.jsxs(e.Fragment,{children:[e.jsx(w,{cords:r.cart,itemsId:i}),e.jsxs("div",{className:t.HeaderMiddle__cartSum,style:{position:"absolute",left:`${r.cart.X-300}px`,top:`${r.cart.Y-40}px`},children:["Общий счет: ",o,"₽"]})]}):null]})})}function xe(){const{data:n,error:i,isLoading:m,isSuccess:c}=k(null),[r,s]=u.useState(!1),o=c?n.productCatalog:[],[l,_]=u.useState({X:0,Y:0}),h=u.useRef(null),f=u.useRef(null);u.useEffect(()=>{if(!r)return;function d(x){var N,v;const g=x.target;(N=h.current)!=null&&N.contains(g)||(v=f.current)!=null&&v.contains(g)||s(!1)}return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[r]);function j(d){if(d.preventDefault(),!f.current)return;const x=!r;if(x){const g=f.current.getBoundingClientRect();_({X:g.left+window.scrollX,Y:g.bottom+window.scrollY})}s(x)}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.Categories,children:[e.jsxs("div",{className:`${t.Categories__one} ${r?t.active:""}`,children:[e.jsxs("button",{"aria-expanded":r,onClick:j,className:t.Categories__burger,ref:f,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(L,{ref:h,items:o,cords:l,isOpen:r,position:"right"}),e.jsx("p",{className:`${t.Categories__one__name} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Каталог товаров"})})]}),e.jsx("div",{className:`${t.Categories__two} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Акции"})}),e.jsx("div",{className:`${t.Categories__three} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Магазины"})})]})})}function ge(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:t.Search,children:e.jsxs("form",{className:t.Search__form,action:"#/",method:"get",children:[e.jsx("input",{type:"text",name:"search-text",className:t.Search__input,placeholder:"Поиск по сайту"}),e.jsx("button",{type:"submit",className:t.Search__button,children:e.jsx("img",{src:"/GGPromarket/header/search-icon.svg",alt:""})})]})})})}function pe({setButtonCords:n}){const{data:i,isLoading:m,isSuccess:c,error:r}=k(null),s=H(),o=u.useRef(null),l=u.useRef(null);F(d=>d.clientState.likeTouched);const _={liked:JSON.parse(localStorage.getItem("likes")||"[]").length,cart:JSON.parse(localStorage.getItem("cart")||"[]").length};function h(d){return e.jsxs("div",{className:t.ActionButtons__button__notification,children:[e.jsx("img",{className:t.ActionButtons__eliplse,src:"/GGPromarket/header/elipse.svg",alt:""}),e.jsx("span",{className:t.ActionButtons__button__notification__sum,children:d})]})}function f(d){var g;if(d.preventDefault(),!o.current)return;const x=(g=o.current)==null?void 0:g.getBoundingClientRect();x&&(n(N=>({...N,like:{X:x.left+window.scrollX,Y:x.bottom+window.scrollY}})),s(X()))}function j(d){var g;if(d.preventDefault(),!l.current)return;const x=(g=l.current)==null?void 0:g.getBoundingClientRect();x&&(n(N=>({...N,cart:{X:x.left+window.scrollX,Y:x.bottom+window.scrollY}})),s(I()))}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.ActionButtons,children:[e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",children:[null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/userButton.svg",alt:""})]})}),e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:o,onClick:f,children:[_.liked>0?h(_.liked):null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/likedButton.svg",alt:""})]})}),e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:l,onClick:j,children:[_.cart>0?h(_.cart):null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/cartButton.svg",alt:""})]})})]})})}function je({id:n}){const{data:i,isSuccess:m}=G(n),c=$();if(!m)return null;function r(s){s.preventDefault(),c(`/product/${n}`,{preventScrollReset:!0})}return e.jsx("li",{className:t.LikedGoods__item,children:e.jsx("a",{className:t.LikedGoods__item__link,href:i.href,onClick:r,children:i.name})})}function w({itemsId:n,cords:i}){const m=n&&n.length>0,c=u.useRef(null),r={top:i.Y,left:i.X-320};return u.useEffect(()=>{if(!c.current)return;c.current.getBoundingClientRect().left<0&&(c.current.style.left="0px")}),e.jsx("div",{ref:c,style:r,className:t.LikedGoods,children:m?e.jsx("ul",{className:t.LikedGoods__list,children:n.map(s=>e.jsx(je,{id:s},s))}):e.jsx("p",{children:"Список понравившихся товаров пуст."})})}function Ne(){return e.jsx(e.Fragment,{children:e.jsx("header",{className:B.header,children:e.jsx("div",{className:B.header__wrapper,children:e.jsxs(C,{children:[e.jsx(z,{}),e.jsx(fe,{})]})})})})}const Fe={},ke="_FooterMain_1xksu_1",Me="_FooterMain__wrapper_1xksu_4",Ce="_FooterMain__list_1xksu_36",ve="_FooterMain__ul_1xksu_41",Be="_FooterMain__adress_1xksu_48",we="_FooterMain__email_1xksu_55",Se="_FooterMain__contacts_1xksu_60",be="_FooterMain__workHours_1xksu_65",Le="_FooterMain__callButton_1xksu_71",Ge="_FooterMain__socialMedia_1xksu_85",a={FooterMain:ke,FooterMain__wrapper:Me,FooterMain__list:Ce,FooterMain__ul:ve,FooterMain__adress:Be,FooterMain__email:we,FooterMain__contacts:Se,FooterMain__workHours:be,FooterMain__callButton:Le,FooterMain__socialMedia:Ge},S={productLinks:[{name:"Error",href:"#"},{name:"Мебель для ванной",href:"#"},{name:"Электроника и бытовая техника",href:"#"},{name:"Отопление",href:"#"},{name:"Напольное покрытие",href:"#"}],infoLinks:[{name:"Оплата",href:"#"},{name:"Доставка",href:"#"},{name:"Поставщикам",href:"#"},{name:"Статьи",href:"#"},{name:"Контакты",href:"#"}],socialMediaLinks:[{name:"whatsapp",href:"https://www.whatsapp.com",img:"Footer/socialMedia/whatsapp.svg"},{name:"instagram",href:"https://www.instagram.com",img:"Footer/socialMedia/instagram.svg"},{name:"telegram",href:"https://www.telegram.org",img:"Footer/socialMedia/telegram.svg"}],adress:"Москва, ул. Салтыковская, 6 стр 11",email:"zakaz@ggpromarket.ru",rate:{href:"#",imgUrl:"/Footer/rate/yandex.png",alt:"yandex"}};function $e(){const{data:n,isSuccess:i}=k(null),{data:m,isSuccess:c}=D(null),r=i?n.callNumber:"",s=c?m:S;return e.jsx(e.Fragment,{children:e.jsx("div",{className:a.FooterMain,children:e.jsx(C,{children:e.jsxs("div",{className:a.FooterMain__wrapper,children:[e.jsxs("div",{className:a.FooterMain__list,children:[e.jsx("ul",{className:a.FooterMain__ul,children:s.productLinks.map(o=>e.jsx("li",{className:a.FooterMain__item,children:e.jsxs("a",{href:o.href,children:[o.name," "]})},o.name))}),e.jsx(b,{width:"214px",height:"24px"}),e.jsx("div",{className:a.FooterMain__copyright,children:"© 2020 ggpromarket.ru"})]}),e.jsx("div",{className:a.FooterMain__list,children:e.jsx("ul",{className:a.FooterMain__ul,children:s.infoLinks.map(o=>e.jsx("li",{className:a.FooterMain__li,children:e.jsx("a",{href:o.href,children:o.name})},o.name))})}),e.jsxs("div",{className:a.FooterMain__contacts,children:[e.jsx(R,{number:Number(r)}),e.jsx("a",{href:`tel:${r}`,className:a.FooterMain__callButton,children:"Заказать звонок"}),e.jsxs("ul",{className:a.FooterMain__workHours,children:[e.jsx("li",{className:a.FooterMain__workHours__item,children:"Пн-Пт: 10:00 — 20:00"}),e.jsx("li",{className:a.FooterMain__workHours__item,children:"Сб: 10:00 — 18:00"}),e.jsx("li",{className:a.FooterMain__workHours__item,children:"Вс: выходной"})]}),e.jsx("div",{className:a.FooterMain__socialMedia,children:S.socialMediaLinks.map(o=>e.jsx("a",{className:a.FooterMain__socialMedia__item,href:o.href,children:e.jsx("img",{src:"/GGPromarket/"+o.img})},o.name))})]}),e.jsxs("div",{className:a.FooterMain__adress,children:[e.jsx("p",{className:a.FooterMain__adress__text,children:"Склад:"}),e.jsx("p",{className:a.FooterMain__adress,children:s.adress}),e.jsx("a",{href:`mailto:${s.email}`,className:a.FooterMain__email,children:s.email}),e.jsx("a",{href:s.rate.href,className:a.FooterMain__rate,children:e.jsx("img",{className:a.FooterMain__rate__img,src:s.rate.imgUrl,alt:s.rate.alt})})]})]})})})})}const ye="_FooterBottom_s3bxy_1",qe="_FooterBottom__inlineLink_s3bxy_12",M={FooterBottom:ye,FooterBottom__inlineLink:qe};function Ae(){return e.jsx(e.Fragment,{children:e.jsx(C,{children:e.jsxs("div",{className:M.FooterBottom,children:[e.jsx("p",{children:"Данный сайт является учебным пет-проектом и создан исключительно в демонстрационных целях. Он не предназначен для ведения реальной коммерческой деятельности, продажи товаров или оказания услуг. Вся информация, представленная на сайте, включая цены, описания товаров и услуги, носит исключительно иллюстративный характер и не должна восприниматься как предложение или призыв к покупке."}),e.jsx("br",{}),e.jsxs("p",{children:["Сайт использует технологию cookie. Используя сайт, Вы соглашаетесь с",e.jsx("a",{href:"#",className:M.FooterBottom__inlineLink,children:"правилами использования cookie"})," ",", а также даете"," ",e.jsx("a",{href:"#",className:M.FooterBottom__inlineLink,children:"согласие на обработку персональных данных"}),"."]})]})})})}function He(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:Fe.Footer,children:[e.jsx($e,{}),e.jsx(Ae,{})]})})}const Ye=y(function(){return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{}),e.jsx(q,{}),e.jsx(He,{})]})});export{Ye as default};
