import{a as o,p as r}from"./chunk-UH6JLGW7-BuU8Z2XH.js";import{T as g}from"./home-DCqAxcGP.js";import{i as h}from"./apiSlise-DyPyVMm8.js";import"./preload-helper-CR-aIV2P.js";import"./ui-DakXsL72.js";const b="_BrandsSlider_1shfp_1",S="_BrandsSlider__buttons_1shfp_4",p="_BrandsSlider__buttonLeft_1shfp_8",x="_BrandsSlider__buttonRight_1shfp_8",j="_BrandsSlider__buttonImg_1shfp_30",C="_Brands_1shfp_1",I="_BrandsCard_1shfp_68",v="_BrandsCard__img_1shfp_87",s={BrandsSlider:b,BrandsSlider__buttons:S,BrandsSlider__buttonLeft:p,BrandsSlider__buttonRight:x,BrandsSlider__buttonImg:j,Brands:C,BrandsCard:I,BrandsCard__img:v};function $(){const{data:e,isSuccess:i,isError:l,error:m,isLoading:f}=h(null),c=i?e:null,d=o.useRef(null),a=t=>{const n=d.current;if(!n)return;const _=n.querySelector(`.${s.BrandsCard}`),u=20,B=_?_.offsetWidth:240;n.scrollBy({left:t==="right"?B+u:-(B+u),behavior:"smooth"})};return r.jsxs(r.Fragment,{children:[r.jsx(g,{description:"Популярные бренды"}),r.jsxs("div",{className:s.BrandsSlider,children:[i?r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:d,className:s.Brands,children:c.map(t=>r.jsx(N,{item:t,scrollEl:d},t.name))}),r.jsxs("div",{className:s.BrandsSlider__buttons,children:[r.jsx("button",{type:"button",onClick:()=>a("left"),className:s.BrandsSlider__buttonLeft,children:r.jsx("img",{className:s.BrandsSlider__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})}),r.jsx("button",{type:"button",onClick:()=>a("right"),className:s.BrandsSlider__buttonRight,children:r.jsx("img",{className:s.BrandsSlider__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})})]})]}):null,f?r.jsx("div",{children:"Загрузка..."}):null,l?r.jsxs("div",{className:s.Brands__error,children:["Ошибка загрузки: ",JSON.stringify(m)]}):null]})]})}function N({item:e,scrollEl:i}){const[l,m]=o.useState(!1),f="/GGPromarket/Brands/defaultImg.webp",[c,d]=o.useState(!1),a=o.useRef(null);return o.useEffect(()=>{if(!a.current||c)return;const t=a.current,n=new IntersectionObserver(_=>{const[u]=_;u.isIntersecting&&(d(!0),n.unobserve(t))},{root:i.current,rootMargin:"250px",threshold:.1});return n.observe(t),()=>{n.disconnect()}}),r.jsx(r.Fragment,{children:r.jsx("a",{ref:a,href:e.link,className:s.BrandsCard,children:c?r.jsx("img",{className:s.BrandsCard__img,src:l?f:e.imgUrl,alt:e.name,onError:()=>{l||m(!0)}}):null},e.name)})}export{$ as default};
