const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Footer-DGQD3tdK.js","assets/chunk-UH6JLGW7-C5_N2qaM.js","assets/ui-C_hnAzDc.js","assets/ui-BUsB4K1L.css","assets/preload-helper-CR-aIV2P.js","assets/apiSlise-DkzWnf8z.js","assets/hooks-c0Jm5PRv.js","assets/clientStates-Ijc_ZD4W.js","assets/catalogCategories-Bq9D1Apy.js","assets/Footer-DGnc_KPE.css"])))=>i.map(i=>d[i]);
import{_ as S}from"./preload-helper-CR-aIV2P.js";import{p as e,v,a as i,x as w,y as b,w as G,O as L}from"./chunk-UH6JLGW7-C5_N2qaM.js";import{L as $,C as A,D as q,a as y}from"./ui-C_hnAzDc.js";import{u as I,b as D}from"./apiSlise-DkzWnf8z.js";import{u as j,a as R}from"./hooks-c0Jm5PRv.js";import"./clientStates-Ijc_ZD4W.js";import{c as H,g as X}from"./catalogCategories-Bq9D1Apy.js";const E="_header_4fqhq_1",P="_header__wrapper_4fqhq_12",k={header:E,header__wrapper:P},Y="_TopBar_1c58q_2",F="_City_1c58q_26",M="_Navigation__Nav_1c58q_46",T="_Navigation__Burger_1c58q_57",O="_underlined_1c58q_78",x={TopBar:Y,City:F,Navigation__Nav:M,Navigation__Burger:T,underlined:O},V="_Navigation_1643p_1",Q="_Navigation__wrapper_1643p_24",U="_Navigation__ul_1643p_28",z="_Navigation__li_1643p_31",J="_Navigation__link_1643p_36",K="_Navigation__close_1643p_44",f={Navigation:V,Navigation__wrapper:Q,Navigation__ul:U,Navigation__li:z,Navigation__link:J,Navigation__close:K};function W({navItems:t,toggleIsdropdownOpen:n}){return e.jsx("div",{className:f.Navigation__wrapper,children:e.jsxs("nav",{className:f.Navigation,children:[e.jsx("ul",{className:f.Navigation__ul,children:t.map(a=>e.jsx("li",{className:f.Navigation__li,children:e.jsx(v,{className:f.Navigation__link,to:a.href,children:a.name})},a.name))}),e.jsxs("div",{className:f.Navigation__close,onClick:n,children:[e.jsx("span",{className:f.Navigation__close__span}),e.jsx("span",{className:f.Navigation__close__span})]})]})})}function Z(){const t=C.currentLocation,n=C.callNumber;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:x.TopBar,children:[e.jsx($,{}),e.jsx(ee,{city:t}),e.jsx(A,{number:n}),e.jsx(te,{})]})})}function ee({city:t="Москва"}){return e.jsx(e.Fragment,{children:e.jsxs("a",{className:x.City,href:"#",children:[e.jsx("img",{className:x.City__icon,src:"/GGPromarket/header/location-icon.svg"}),e.jsx("span",{className:x.underlined,children:t})]})})}function te(){const t=[{name:"Каталог",href:"/catalog"},{name:"Доставка",href:"/order"},{name:"Скидки",href:"/discounts"},{name:"Бренды",href:"/brands"},{name:"Контакты",href:"/contacts"}],[n,a]=i.useState(!1);function o(_){a(!n)}return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,className:x.Navigation__Burger,"aria-expanded":n,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),n?e.jsx(W,{navItems:t,toggleIsdropdownOpen:o}):null,e.jsx("div",{className:x.Navigation__Nav,children:t.map(_=>e.jsx(v,{to:_.href,className:x.Navigation__item,children:_.name},_.name))})]})}const se="_HeaderMiddle_1ql5a_1",ne="_HeaderMiddle__cartSum_1ql5a_6",ae="_Categories_1ql5a_19",oe="_Categories__title_1ql5a_51",re="_Categories__one_1ql5a_60",ie="_Categories__burger_1ql5a_84",ce="_Categories__two_1ql5a_97",_e="_Categories__three_1ql5a_101",le="_Search_1ql5a_106",de="_Search__form_1ql5a_126",ue="_Search__input_1ql5a_136",me="_ActionButtons_1ql5a_144",ge="_ActionButtons__button_1ql5a_177",he="_ActionButtons__eliplse_1ql5a_183",pe="_ActionButtons__button__notification__sum_1ql5a_188",fe="_LikedGoods_1ql5a_225",xe="_LikedGoods__list_1ql5a_242",Ne="_LikedGoods__item_1ql5a_246",s={HeaderMiddle:se,HeaderMiddle__cartSum:ne,Categories:ae,Categories__title:oe,Categories__one:re,Categories__burger:ie,Categories__two:ce,Categories__three:_e,Search:le,Search__form:de,Search__input:ue,ActionButtons:me,ActionButtons__button:ge,ActionButtons__eliplse:he,ActionButtons__button__notification__sum:pe,LikedGoods:fe,LikedGoods__list:xe,LikedGoods__item:Ne};function ve(){const t=j(u=>u.clientState.likedItems),n=j(u=>u.clientState.cartItems),[a,o]=i.useState(!1),[_,r]=i.useState(!1),[c,g]=i.useState({like:{X:0,Y:0},cart:{X:0,Y:0}}),{data:d}=I(null),h=i.useMemo(()=>{if(!d)return 0;const u=d;return n.reduce((l,m)=>{const p=u.find(N=>N.id===m);return p?l+p.price:l},0)},[n,d]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.HeaderMiddle,children:[e.jsx(je,{}),e.jsx(Ce,{}),e.jsx(ke,{setButtonCords:g,setIsCartButtonTouched:r,setIsLikesButtonTouched:o,isLikesButtonTouched:a,isCartButtonTouched:_}),a?e.jsx(B,{cords:c.like,itemsId:t}):null,_?e.jsxs(e.Fragment,{children:[e.jsx(B,{cords:c.cart,itemsId:n}),e.jsxs("div",{className:s.HeaderMiddle__cartSum,style:{position:"absolute",left:`${c.cart.X-300}px`,top:`${c.cart.Y-40}px`},children:["Общий счет: ",h,"₽"]})]}):null]})})}function je(){const[t,n]=i.useState(!1),a=C.productCatalog,[o,_]=i.useState({X:0,Y:0}),r=i.useRef(null),c=i.useRef(null);i.useEffect(()=>{if(!t)return;function d(h){var l,m;const u=h.target;(l=r.current)!=null&&l.contains(u)||(m=c.current)!=null&&m.contains(u)||n(!1)}return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[t]);function g(d){if(d.preventDefault(),!c.current)return;const h=!t;if(h){const u=c.current.getBoundingClientRect();_({X:u.left+window.scrollX,Y:u.bottom+window.scrollY})}n(h)}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.Categories,children:[e.jsxs("div",{className:`${s.Categories__one} ${t?s.active:""}`,children:[e.jsxs("button",{"aria-expanded":t,onClick:g,className:s.Categories__burger,ref:c,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(q,{ref:r,items:a,cords:o,isOpen:t,position:"right"}),e.jsx("p",{className:`${s.Categories__one__name} ${s.Categories__title}`,children:e.jsx(v,{to:"/catalog",children:"Каталог товаров"})})]}),e.jsx("div",{className:`${s.Categories__two} ${s.Categories__title}`,children:e.jsx(v,{to:"/catalog?page=1&sale=1",children:"Акции"})}),e.jsx("div",{className:`${s.Categories__three} ${s.Categories__title}`,children:e.jsx("a",{href:"#",children:"Магазины"})})]})})}function Ce(){const[t,n]=i.useState(""),a=w(),o=b();i.useEffect(()=>{const r=new URLSearchParams(o.search);n(r.get("search")??"")},[o.search]);function _(r){r.preventDefault();const c=t.trim(),g=new URLSearchParams;c&&g.set("search",c);const d=g.toString();a(d?`/catalog?${d}`:"/catalog")}return e.jsx("div",{className:s.Search,children:e.jsxs("form",{className:s.Search__form,onSubmit:_,children:[e.jsx("input",{type:"text",name:"search-text",className:s.Search__input,placeholder:"Поиск по сайту",value:t,onChange:r=>n(r.target.value)}),e.jsx("button",{type:"submit",className:s.Search__button,children:e.jsx("img",{src:"/GGPromarket/header/search-icon.svg",alt:""})})]})})}function ke({setButtonCords:t,setIsCartButtonTouched:n,setIsLikesButtonTouched:a,isLikesButtonTouched:o,isCartButtonTouched:_}){R();const r=i.useRef(null),c=i.useRef(null),g={liked:j(l=>l.clientState.likedItems).length,cart:j(l=>l.clientState.cartItems).length};function d(l){return e.jsxs("div",{className:s.ActionButtons__button__notification,children:[e.jsx("img",{className:s.ActionButtons__eliplse,src:"/GGPromarket/header/elipse.svg",alt:""}),e.jsx("span",{className:s.ActionButtons__button__notification__sum,children:l})]})}function h(l){var p;if(l.preventDefault(),!r.current)return;const m=(p=r.current)==null?void 0:p.getBoundingClientRect();m&&(t(N=>({...N,like:{X:m.left+window.scrollX,Y:m.bottom+window.scrollY}})),a(!o))}function u(l){var p;if(l.preventDefault(),!c.current)return;const m=(p=c.current)==null?void 0:p.getBoundingClientRect();m&&(t(N=>({...N,cart:{X:m.left+window.scrollX,Y:m.bottom+window.scrollY}})),n(!_))}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.ActionButtons,children:[e.jsx("div",{className:s.ActionButtons__button,children:e.jsxs("a",{href:"#",children:[null,e.jsx("img",{className:s.ActionButtons__button__icon,src:"/GGPromarket/header/userButton.svg",alt:""})]})}),e.jsx("div",{className:s.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:r,onClick:h,children:[g.liked>0?d(g.liked):null,e.jsx("img",{className:s.ActionButtons__button__icon,src:"/GGPromarket/header/likedButton.svg",alt:""})]})}),e.jsx("div",{className:s.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:c,onClick:u,children:[g.cart>0?d(g.cart):null,e.jsx("img",{className:s.ActionButtons__button__icon,src:"/GGPromarket/header/cartButton.svg",alt:""})]})})]})})}function Be({id:t}){const{data:n,isSuccess:a}=D(t);if(!a)return null;const o=`/product/${t}`;return e.jsx("li",{className:s.LikedGoods__item,children:e.jsx(v,{className:s.LikedGoods__item__link,to:o,preventScrollReset:!0,children:n.name})})}function B({itemsId:t,cords:n}){const a=t&&t.length>0,o=i.useRef(null),_={top:n.Y,left:n.X-320};return i.useEffect(()=>{if(!o.current)return;o.current.getBoundingClientRect().left<0&&(o.current.style.left="0px")}),e.jsx("div",{ref:o,style:_,className:s.LikedGoods,children:a?e.jsx("ul",{className:s.LikedGoods__list,children:t.map(r=>e.jsx(Be,{id:r},r))}):e.jsx("p",{children:"Список понравившихся товаров пуст."})})}const C={currentLocation:"Москва",callNumber:81231231223,productCatalog:H.map(t=>({name:t.label,href:X(t.key)}))};function Se(){return e.jsx(e.Fragment,{children:e.jsx("header",{className:k.header,children:e.jsx("div",{className:k.header__wrapper,children:e.jsxs(y,{children:[e.jsx(Z,{}),e.jsx(ve,{})]})})})})}const we=i.lazy(()=>S(()=>import("./Footer-DGQD3tdK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Ie=G(function(){return e.jsxs(e.Fragment,{children:[e.jsx(Se,{}),e.jsx(L,{}),e.jsx(we,{})]})});export{Ie as H,C as h};
