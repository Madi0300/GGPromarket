const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Footer-CjBYqr0E.js","assets/chunk-UH6JLGW7-xtm7V6Md.js","assets/ui-Bh3naldN.js","assets/ui-BUsB4K1L.css","assets/preload-helper-CR-aIV2P.js","assets/apiSlise-BRduWZpW.js","assets/hooks-SON3esK2.js","assets/clientStates-Cqai_9ZR.js","assets/catalogCategories-Bq9D1Apy.js","assets/Footer-DGnc_KPE.css"])))=>i.map(i=>d[i]);
import{_ as S}from"./preload-helper-CR-aIV2P.js";import{p as e,a as c,v as B,x as w,w as b,O as G}from"./chunk-UH6JLGW7-xtm7V6Md.js";import{L,C as $,D as A,a as q}from"./ui-Bh3naldN.js";import{u as y,b as I}from"./apiSlise-BRduWZpW.js";import{u as N,a as D}from"./hooks-SON3esK2.js";import"./clientStates-Cqai_9ZR.js";import{c as R,g as H}from"./catalogCategories-Bq9D1Apy.js";const X="_header_4fqhq_1",E="_header__wrapper_4fqhq_12",C={header:X,header__wrapper:E},P="_TopBar_1c58q_2",Y="_City_1c58q_26",F="_Navigation__Nav_1c58q_46",M="_Navigation__Burger_1c58q_57",T="_underlined_1c58q_78",x={TopBar:P,City:Y,Navigation__Nav:F,Navigation__Burger:M,underlined:T},O="_Navigation_1643p_1",V="_Navigation__wrapper_1643p_24",Q="_Navigation__ul_1643p_28",U="_Navigation__li_1643p_31",z="_Navigation__link_1643p_36",J="_Navigation__close_1643p_44",f={Navigation:O,Navigation__wrapper:V,Navigation__ul:Q,Navigation__li:U,Navigation__link:z,Navigation__close:J};function K({navItems:t,toggleIsdropdownOpen:n}){return e.jsx("div",{className:f.Navigation__wrapper,children:e.jsxs("nav",{className:f.Navigation,children:[e.jsx("ul",{className:f.Navigation__ul,children:t.map(o=>e.jsx("li",{className:f.Navigation__li,children:e.jsx("a",{className:f.Navigation__link,href:o.href,children:o.name},o.name)},o.name))}),e.jsxs("div",{className:f.Navigation__close,onClick:n,children:[e.jsx("span",{className:f.Navigation__close__span}),e.jsx("span",{className:f.Navigation__close__span})]})]})})}function W(){const t=j.currentLocation,n=j.callNumber;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:x.TopBar,children:[e.jsx(L,{}),e.jsx(Z,{city:t}),e.jsx($,{number:n}),e.jsx(ee,{})]})})}function Z({city:t="Москва"}){return e.jsx(e.Fragment,{children:e.jsxs("a",{className:x.City,href:"#",children:[e.jsx("img",{className:x.City__icon,src:"/GGPromarket/header/location-icon.svg"}),e.jsx("span",{className:x.underlined,children:t})]})})}function ee(){const t=[{name:"Каталог",href:"/catalog"},{name:"Доставка",href:"/order"},{name:"Скидки",href:"/discounts"},{name:"Бренды",href:"/brands"},{name:"Контакты",href:"/contacts"}],[n,o]=c.useState(!1);function r(i){o(!n)}return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:r,className:x.Navigation__Burger,"aria-expanded":n,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),n?e.jsx(K,{navItems:t,toggleIsdropdownOpen:r}):null,e.jsx("div",{className:x.Navigation__Nav,children:t.map(i=>e.jsx("a",{href:i.href,className:x.Navigation__item,children:i.name},i.name))})]})}const te="_HeaderMiddle_1ql5a_1",se="_HeaderMiddle__cartSum_1ql5a_6",ne="_Categories_1ql5a_19",ae="_Categories__title_1ql5a_51",oe="_Categories__one_1ql5a_60",re="_Categories__burger_1ql5a_84",ie="_Categories__two_1ql5a_97",ce="_Categories__three_1ql5a_101",_e="_Search_1ql5a_106",le="_Search__form_1ql5a_126",de="_Search__input_1ql5a_136",ue="_ActionButtons_1ql5a_144",me="_ActionButtons__button_1ql5a_177",ge="_ActionButtons__eliplse_1ql5a_183",he="_ActionButtons__button__notification__sum_1ql5a_188",pe="_LikedGoods_1ql5a_225",fe="_LikedGoods__list_1ql5a_242",xe="_LikedGoods__item_1ql5a_246",s={HeaderMiddle:te,HeaderMiddle__cartSum:se,Categories:ne,Categories__title:ae,Categories__one:oe,Categories__burger:re,Categories__two:ie,Categories__three:ce,Search:_e,Search__form:le,Search__input:de,ActionButtons:ue,ActionButtons__button:me,ActionButtons__eliplse:ge,ActionButtons__button__notification__sum:he,LikedGoods:pe,LikedGoods__list:fe,LikedGoods__item:xe};function ve(){const t=N(u=>u.clientState.likedItems),n=N(u=>u.clientState.cartItems),[o,r]=c.useState(!1),[i,a]=c.useState(!1),[_,g]=c.useState({like:{X:0,Y:0},cart:{X:0,Y:0}}),{data:d}=y(null),h=c.useMemo(()=>{if(!d)return 0;const u=d;return n.reduce((l,m)=>{const p=u.find(v=>v.id===m);return p?l+p.price:l},0)},[n,d]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.HeaderMiddle,children:[e.jsx(Ne,{}),e.jsx(je,{}),e.jsx(Ce,{setButtonCords:g,setIsCartButtonTouched:a,setIsLikesButtonTouched:r,isLikesButtonTouched:o,isCartButtonTouched:i}),o?e.jsx(k,{cords:_.like,itemsId:t}):null,i?e.jsxs(e.Fragment,{children:[e.jsx(k,{cords:_.cart,itemsId:n}),e.jsxs("div",{className:s.HeaderMiddle__cartSum,style:{position:"absolute",left:`${_.cart.X-300}px`,top:`${_.cart.Y-40}px`},children:["Общий счет: ",h,"₽"]})]}):null]})})}function Ne(){const[t,n]=c.useState(!1),o=j.productCatalog,[r,i]=c.useState({X:0,Y:0}),a=c.useRef(null),_=c.useRef(null);c.useEffect(()=>{if(!t)return;function d(h){var l,m;const u=h.target;(l=a.current)!=null&&l.contains(u)||(m=_.current)!=null&&m.contains(u)||n(!1)}return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[t]);function g(d){if(d.preventDefault(),!_.current)return;const h=!t;if(h){const u=_.current.getBoundingClientRect();i({X:u.left+window.scrollX,Y:u.bottom+window.scrollY})}n(h)}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.Categories,children:[e.jsxs("div",{className:`${s.Categories__one} ${t?s.active:""}`,children:[e.jsxs("button",{"aria-expanded":t,onClick:g,className:s.Categories__burger,ref:_,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(A,{ref:a,items:o,cords:r,isOpen:t,position:"right"}),e.jsx("p",{className:`${s.Categories__one__name} ${s.Categories__title}`,children:e.jsx("a",{href:"#",children:"Каталог товаров"})})]}),e.jsx("div",{className:`${s.Categories__two} ${s.Categories__title}`,children:e.jsx("a",{href:"/catalog?page=1&sale=1",children:"Акции"})}),e.jsx("div",{className:`${s.Categories__three} ${s.Categories__title}`,children:e.jsx("a",{href:"#",children:"Магазины"})})]})})}function je(){const[t,n]=c.useState(""),o=B(),r=w();c.useEffect(()=>{const a=new URLSearchParams(r.search);n(a.get("search")??"")},[r.search]);function i(a){a.preventDefault();const _=t.trim(),g=new URLSearchParams;_&&g.set("search",_);const d=g.toString();o(d?`/catalog?${d}`:"/catalog")}return e.jsx("div",{className:s.Search,children:e.jsxs("form",{className:s.Search__form,onSubmit:i,children:[e.jsx("input",{type:"text",name:"search-text",className:s.Search__input,placeholder:"Поиск по сайту",value:t,onChange:a=>n(a.target.value)}),e.jsx("button",{type:"submit",className:s.Search__button,children:e.jsx("img",{src:"/GGPromarket/header/search-icon.svg",alt:""})})]})})}function Ce({setButtonCords:t,setIsCartButtonTouched:n,setIsLikesButtonTouched:o,isLikesButtonTouched:r,isCartButtonTouched:i}){D();const a=c.useRef(null),_=c.useRef(null),g={liked:N(l=>l.clientState.likedItems).length,cart:N(l=>l.clientState.cartItems).length};function d(l){return e.jsxs("div",{className:s.ActionButtons__button__notification,children:[e.jsx("img",{className:s.ActionButtons__eliplse,src:"/GGPromarket/header/elipse.svg",alt:""}),e.jsx("span",{className:s.ActionButtons__button__notification__sum,children:l})]})}function h(l){var p;if(l.preventDefault(),!a.current)return;const m=(p=a.current)==null?void 0:p.getBoundingClientRect();m&&(t(v=>({...v,like:{X:m.left+window.scrollX,Y:m.bottom+window.scrollY}})),o(!r))}function u(l){var p;if(l.preventDefault(),!_.current)return;const m=(p=_.current)==null?void 0:p.getBoundingClientRect();m&&(t(v=>({...v,cart:{X:m.left+window.scrollX,Y:m.bottom+window.scrollY}})),n(!i))}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.ActionButtons,children:[e.jsx("div",{className:s.ActionButtons__button,children:e.jsxs("a",{href:"#",children:[null,e.jsx("img",{className:s.ActionButtons__button__icon,src:"/GGPromarket/header/userButton.svg",alt:""})]})}),e.jsx("div",{className:s.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:a,onClick:h,children:[g.liked>0?d(g.liked):null,e.jsx("img",{className:s.ActionButtons__button__icon,src:"/GGPromarket/header/likedButton.svg",alt:""})]})}),e.jsx("div",{className:s.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:_,onClick:u,children:[g.cart>0?d(g.cart):null,e.jsx("img",{className:s.ActionButtons__button__icon,src:"/GGPromarket/header/cartButton.svg",alt:""})]})})]})})}function ke({id:t}){const{data:n,isSuccess:o}=I(t),r=B();if(!o)return null;function i(a){a.preventDefault(),r(`/product/${t}`,{preventScrollReset:!0})}return e.jsx("li",{className:s.LikedGoods__item,children:e.jsx("a",{className:s.LikedGoods__item__link,href:n.href,onClick:i,children:n.name})})}function k({itemsId:t,cords:n}){const o=t&&t.length>0,r=c.useRef(null),i={top:n.Y,left:n.X-320};return c.useEffect(()=>{if(!r.current)return;r.current.getBoundingClientRect().left<0&&(r.current.style.left="0px")}),e.jsx("div",{ref:r,style:i,className:s.LikedGoods,children:o?e.jsx("ul",{className:s.LikedGoods__list,children:t.map(a=>e.jsx(ke,{id:a},a))}):e.jsx("p",{children:"Список понравившихся товаров пуст."})})}const j={currentLocation:"Москва",callNumber:81231231223,productCatalog:R.map(t=>({name:t.label,href:H(t.key)}))};function Be(){return e.jsx(e.Fragment,{children:e.jsx("header",{className:C.header,children:e.jsx("div",{className:C.header__wrapper,children:e.jsxs(q,{children:[e.jsx(W,{}),e.jsx(ve,{})]})})})})}const Se=c.lazy(()=>S(()=>import("./Footer-CjBYqr0E.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),ye=b(function(){return e.jsxs(e.Fragment,{children:[e.jsx(Be,{}),e.jsx(G,{}),e.jsx(Se,{})]})});export{ye as H,j as h};
