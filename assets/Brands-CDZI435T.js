import{a as o,p as r,v as g}from"./chunk-UH6JLGW7-C5_N2qaM.js";import{T as h}from"./home-D5f2UMRl.js";import{h as b}from"./apiSlise-DkzWnf8z.js";import"./preload-helper-CR-aIV2P.js";import"./ui-C_hnAzDc.js";const S="_BrandsSlider_1shfp_1",p="_BrandsSlider__buttons_1shfp_4",x="_BrandsSlider__buttonLeft_1shfp_8",j="_BrandsSlider__buttonRight_1shfp_8",C="_BrandsSlider__buttonImg_1shfp_30",v="_Brands_1shfp_1",I="_BrandsCard_1shfp_68",N="_BrandsCard__img_1shfp_87",s={BrandsSlider:S,BrandsSlider__buttons:p,BrandsSlider__buttonLeft:x,BrandsSlider__buttonRight:j,BrandsSlider__buttonImg:C,Brands:v,BrandsCard:I,BrandsCard__img:N};function $(){const{data:e,isSuccess:i,isError:l,error:m,isLoading:f}=b(null),c=i?e:null,d=o.useRef(null),a=t=>{const n=d.current;if(!n)return;const _=n.querySelector(`.${s.BrandsCard}`),u=20,B=_?_.offsetWidth:240;n.scrollBy({left:t==="right"?B+u:-(B+u),behavior:"smooth"})};return r.jsxs(r.Fragment,{children:[r.jsx(h,{description:"Популярные бренды"}),r.jsxs("div",{className:s.BrandsSlider,children:[i?r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:d,className:s.Brands,children:c.map(t=>r.jsx(y,{item:t,scrollEl:d},t.name))}),r.jsxs("div",{className:s.BrandsSlider__buttons,children:[r.jsx("button",{type:"button",onClick:()=>a("left"),className:s.BrandsSlider__buttonLeft,children:r.jsx("img",{className:s.BrandsSlider__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})}),r.jsx("button",{type:"button",onClick:()=>a("right"),className:s.BrandsSlider__buttonRight,children:r.jsx("img",{className:s.BrandsSlider__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})})]})]}):null,f?r.jsx("div",{children:"Загрузка..."}):null,l?r.jsxs("div",{className:s.Brands__error,children:["Ошибка загрузки: ",JSON.stringify(m)]}):null]})]})}function y({item:e,scrollEl:i}){const[l,m]=o.useState(!1),f="/GGPromarket/Brands/defaultImg.webp",[c,d]=o.useState(!1),a=o.useRef(null);return o.useEffect(()=>{if(!a.current||c)return;const t=a.current,n=new IntersectionObserver(_=>{const[u]=_;u.isIntersecting&&(d(!0),n.unobserve(t))},{root:i.current,rootMargin:"250px",threshold:.1});return n.observe(t),()=>{n.disconnect()}}),r.jsx(r.Fragment,{children:r.jsx(g,{ref:a,to:e.link,className:s.BrandsCard,children:c?r.jsx("img",{className:s.BrandsCard__img,src:l?f:e.imgUrl,alt:e.name,onError:()=>{l||m(!0)}}):null},e.name)})}export{$ as default};
