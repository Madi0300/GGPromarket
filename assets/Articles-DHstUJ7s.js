import{a as o,p as t}from"./chunk-UH6JLGW7-xtm7V6Md.js";import{T as f}from"./home-X55hdNU_.js";import{g as b}from"./apiSlise-BRduWZpW.js";import"./preload-helper-CR-aIV2P.js";import"./ui-Bh3naldN.js";const h="_Articles_nq09n_1",x="_Articles__buttons_nq09n_5",j="_Articles__buttonLeft_nq09n_9",p="_Articles__buttonRight_nq09n_9",I="_Articles__buttonImg_nq09n_31",C="_Articles__error_nq09n_34",v="_Articles__loading_nq09n_37",N="_Articles__slider_nq09n_41",q="_ArticleCard_nq09n_53",G="_ArticleCard__title_nq09n_81",r={Articles:h,Articles__buttons:x,Articles__buttonLeft:j,Articles__buttonRight:p,Articles__buttonImg:I,Articles__error:C,Articles__loading:v,Articles__slider:N,ArticleCard:q,ArticleCard__title:G};function S(){const{data:l,isSuccess:_,isError:c,error:e,isLoading:m}=b(null),a=_?l:null,i=o.useRef(null),u=s=>{const n=i.current;if(!n)return;const d=n.querySelector(`.${r.ArticleCard}`),A=20,g=d?d.offsetWidth:370;n.scrollBy({left:s==="right"?g+A:-(g+A),behavior:"smooth"})};return t.jsxs(t.Fragment,{children:[t.jsx(f,{description:"Статьи"}),_?t.jsxs("div",{className:r.Articles,children:[t.jsx("div",{ref:i,className:r.Articles__slider,children:a.map(s=>t.jsx(y,{item:s,scrollEl:i},s.id))}),t.jsxs("div",{className:r.Articles__buttons,children:[t.jsx("button",{type:"button",onClick:()=>u("left"),className:r.Articles__buttonLeft,children:t.jsx("img",{className:r.Articles__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})}),t.jsx("button",{type:"button",onClick:()=>u("right"),className:r.Articles__buttonRight,children:t.jsx("img",{className:r.Articles__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})})]})]}):null,m?t.jsx("div",{className:r.Articles__loading,children:"Загрузка..."}):null,c?t.jsxs("div",{className:r.Articles__error,children:["Ошибка загрузки статей:"," ",e&&"status"in e?e.status:e.message]}):null]})}function y({item:l,scrollEl:_}){const c=o.useRef(null),[e,m]=o.useState(!1),[a,i]=o.useState(!1),u="/GGPromarket/Articles/defaultImg.webp";return o.useEffect(()=>{if(e||!c.current)return;const s=c.current,n=new IntersectionObserver(d=>{const[A]=d;A.isIntersecting&&(m(!0),n.unobserve(s))},{root:_.current,rootMargin:"300px",threshold:.1});n.observe(s)}),t.jsx(t.Fragment,{children:t.jsxs("a",{ref:c,href:l.link,className:r.ArticleCard,children:[e?t.jsx("img",{className:r.ArticleCard__img,src:a?u:l.imgUrl,alt:l.title,onError:()=>{a||(console.log("ddd"),i(!0))}}):null,t.jsx("h4",{className:r.ArticleCard__title,children:l.title})]})})}export{S as default};
