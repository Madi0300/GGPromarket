import{p as e,a as m,v as y,w as $,O as q}from"./chunk-UH6JLGW7-BuU8Z2XH.js";import{L as b,C as A,D as G,u as w,a as H,b as B,P as D}from"./hooks-Sj0gG-DA.js";import{u as M,d as R,e as E,f as X}from"./clientStates-DR5EddyC.js";const I="_header_4fqhq_1",Y="_header__wrapper_4fqhq_12",S={header:I,header__wrapper:Y},O="_TopBar_1c58q_2",P="_City_1c58q_26",T="_Navigation__Nav_1c58q_46",Q="_Navigation__Burger_1c58q_57",J="_underlined_1c58q_78",N={TopBar:O,City:P,Navigation__Nav:T,Navigation__Burger:Q,underlined:J};function z(){const{data:s,error:a,isLoading:x,isSuccess:_}=M(null),c=_?s.currentLocation:"",d=_?s.callNumber:"";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:N.TopBar,children:[e.jsx(b,{}),e.jsx(U,{city:c}),e.jsx(A,{number:d}),e.jsx(K,{})]})})}function U({city:s="Москва"}){return e.jsx(e.Fragment,{children:e.jsxs("a",{className:N.City,href:"#",children:[e.jsx("img",{className:N.City__icon,src:"/GGPromarket/header/location-icon.svg"}),e.jsx("span",{className:N.underlined,children:s})]})})}function K(){const s=[{name:"Каталог",href:"/catalog"},{name:"Доставка",href:"/order"},{name:"Скидки",href:"/discounts"},{name:"Бренды",href:"/brands"},{name:"Контакты",href:"/contacts"}],[a,x]=m.useState(!1),[_,c]=m.useState({X:0,Y:0}),d=m.useRef(null),u=m.useRef(null);function g(l){if(l.preventDefault(),!u.current)return;const h=!a;if(h){const r=u.current.getBoundingClientRect();c({X:r.left+window.scrollX,Y:r.bottom+window.scrollY})}x(h)}return m.useEffect(()=>{if(!a)return;function l(h){var i,o;const r=h.target;(i=d.current)!=null&&i.contains(r)||(o=u.current)!=null&&o.contains(r)||x(!1)}return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[a]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:g,className:N.Navigation__Burger,ref:u,"aria-expanded":a,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(G,{position:"right",ref:d,items:s,cords:_,isOpen:a}),e.jsx("div",{className:N.Navigation__Nav,children:s.map(l=>e.jsx("a",{href:l.href,className:N.Navigation__item,children:l.name},l.name))})]})}const V="_HeaderMiddle_1ql5a_1",W="_HeaderMiddle__cartSum_1ql5a_6",Z="_Categories_1ql5a_19",ee="_Categories__title_1ql5a_51",te="_Categories__one_1ql5a_60",se="_Categories__burger_1ql5a_84",oe="_Categories__two_1ql5a_97",ne="_Categories__three_1ql5a_101",re="_Search_1ql5a_106",ae="_Search__form_1ql5a_126",ie="_Search__input_1ql5a_136",ce="_ActionButtons_1ql5a_144",le="_ActionButtons__button_1ql5a_177",_e="_ActionButtons__eliplse_1ql5a_183",de="_ActionButtons__button__notification__sum_1ql5a_188",ue="_LikedGoods_1ql5a_225",me="_LikedGoods__list_1ql5a_242",he="_LikedGoods__item_1ql5a_246",t={HeaderMiddle:V,HeaderMiddle__cartSum:W,Categories:Z,Categories__title:ee,Categories__one:te,Categories__burger:se,Categories__two:oe,Categories__three:ne,Search:re,Search__form:ae,Search__input:ie,ActionButtons:ce,ActionButtons__button:le,ActionButtons__eliplse:_e,ActionButtons__button__notification__sum:de,LikedGoods:ue,LikedGoods__list:me,LikedGoods__item:he};function xe(){const s=w(r=>r.clientState.likedItems),a=w(r=>r.clientState.cartItems),[x,_]=m.useState(!1),[c,d]=m.useState(!1),[u,g]=m.useState({like:{X:0,Y:0},cart:{X:0,Y:0}}),{data:l}=R(null),h=m.useMemo(()=>{if(!l)return 0;const r=l;return a.reduce((i,o)=>{const p=r.find(F=>F.id===o);return p?i+p.price:i},0)},[a,l]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.HeaderMiddle,children:[e.jsx(fe,{}),e.jsx(ge,{}),e.jsx(je,{setButtonCords:g,setIsCartButtonTouched:d,setIsLikesButtonTouched:_,isLikesButtonTouched:x,isCartButtonTouched:c}),x?e.jsx(L,{cords:u.like,itemsId:s}):null,c?e.jsxs(e.Fragment,{children:[e.jsx(L,{cords:u.cart,itemsId:a}),e.jsxs("div",{className:t.HeaderMiddle__cartSum,style:{position:"absolute",left:`${u.cart.X-300}px`,top:`${u.cart.Y-40}px`},children:["Общий счет: ",h,"₽"]})]}):null]})})}function fe(){const{data:s,error:a,isLoading:x,isSuccess:_}=M(null),[c,d]=m.useState(!1),u=_?s.productCatalog:[],[g,l]=m.useState({X:0,Y:0}),h=m.useRef(null),r=m.useRef(null);m.useEffect(()=>{if(!c)return;function o(p){var f,j;const F=p.target;(f=h.current)!=null&&f.contains(F)||(j=r.current)!=null&&j.contains(F)||d(!1)}return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[c]);function i(o){if(o.preventDefault(),!r.current)return;const p=!c;if(p){const F=r.current.getBoundingClientRect();l({X:F.left+window.scrollX,Y:F.bottom+window.scrollY})}d(p)}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.Categories,children:[e.jsxs("div",{className:`${t.Categories__one} ${c?t.active:""}`,children:[e.jsxs("button",{"aria-expanded":c,onClick:i,className:t.Categories__burger,ref:r,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(G,{ref:h,items:u,cords:g,isOpen:c,position:"right"}),e.jsx("p",{className:`${t.Categories__one__name} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Каталог товаров"})})]}),e.jsx("div",{className:`${t.Categories__two} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Акции"})}),e.jsx("div",{className:`${t.Categories__three} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Магазины"})})]})})}function ge(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:t.Search,children:e.jsxs("form",{className:t.Search__form,action:"#/",method:"get",children:[e.jsx("input",{type:"text",name:"search-text",className:t.Search__input,placeholder:"Поиск по сайту"}),e.jsx("button",{type:"submit",className:t.Search__button,children:e.jsx("img",{src:"/GGPromarket/header/search-icon.svg",alt:""})})]})})})}function je({setButtonCords:s,setIsCartButtonTouched:a,setIsLikesButtonTouched:x,isLikesButtonTouched:_,isCartButtonTouched:c}){const{data:d,isLoading:u,isSuccess:g,error:l}=M(null);H();const h=m.useRef(null),r=m.useRef(null),i={liked:w(f=>f.clientState.likedItems).length,cart:w(f=>f.clientState.cartItems).length};function o(f){return e.jsxs("div",{className:t.ActionButtons__button__notification,children:[e.jsx("img",{className:t.ActionButtons__eliplse,src:"/GGPromarket/header/elipse.svg",alt:""}),e.jsx("span",{className:t.ActionButtons__button__notification__sum,children:f})]})}function p(f){var v;if(f.preventDefault(),!h.current)return;const j=(v=h.current)==null?void 0:v.getBoundingClientRect();j&&(s(C=>({...C,like:{X:j.left+window.scrollX,Y:j.bottom+window.scrollY}})),x(!_))}function F(f){var v;if(f.preventDefault(),!r.current)return;const j=(v=r.current)==null?void 0:v.getBoundingClientRect();j&&(s(C=>({...C,cart:{X:j.left+window.scrollX,Y:j.bottom+window.scrollY}})),a(!c))}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.ActionButtons,children:[e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",children:[null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/userButton.svg",alt:""})]})}),e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:h,onClick:p,children:[i.liked>0?o(i.liked):null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/likedButton.svg",alt:""})]})}),e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:r,onClick:F,children:[i.cart>0?o(i.cart):null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/cartButton.svg",alt:""})]})})]})})}function pe({id:s}){const{data:a,isSuccess:x}=E(s),_=y();if(!x)return null;function c(d){d.preventDefault(),_(`/product/${s}`,{preventScrollReset:!0})}return e.jsx("li",{className:t.LikedGoods__item,children:e.jsx("a",{className:t.LikedGoods__item__link,href:a.href,onClick:c,children:a.name})})}function L({itemsId:s,cords:a}){const x=s&&s.length>0,_=m.useRef(null),c={top:a.Y,left:a.X-320};return m.useEffect(()=>{if(!_.current)return;_.current.getBoundingClientRect().left<0&&(_.current.style.left="0px")}),e.jsx("div",{ref:_,style:c,className:t.LikedGoods,children:x?e.jsx("ul",{className:t.LikedGoods__list,children:s.map(d=>e.jsx(pe,{id:d},d))}):e.jsx("p",{children:"Список понравившихся товаров пуст."})})}function Fe(){return e.jsx(e.Fragment,{children:e.jsx("header",{className:S.header,children:e.jsx("div",{className:S.header__wrapper,children:e.jsxs(B,{children:[e.jsx(z,{}),e.jsx(xe,{})]})})})})}const Ne={},ve="_FooterMain_1xwvl_1",we="_FooterMain__wrapper_1xwvl_4",Me="_FooterMain__list_1xwvl_36",Ce="_FooterMain__ul_1xwvl_41",ke="_FooterMain__adress_1xwvl_48",Be="_FooterMain__email_1xwvl_55",Se="_FooterMain__contacts_1xwvl_60",Le="_FooterMain__workHours_1xwvl_65",be="_FooterMain__callButton_1xwvl_71",Ge="_FooterMain__socialMedia_1xwvl_90",n={FooterMain:ve,FooterMain__wrapper:we,FooterMain__list:Me,FooterMain__ul:Ce,FooterMain__adress:ke,FooterMain__email:Be,FooterMain__contacts:Se,FooterMain__workHours:Le,FooterMain__callButton:be,FooterMain__socialMedia:Ge},ye={productLinks:[{name:"Error",href:"#"}],infoLinks:[],socialMediaLinks:[{name:"whatsapp",href:"https://www.whatsapp.com",img:"Footer/socialMedia/whatsapp.svg"},{name:"instagram",href:"https://www.instagram.com",img:"Footer/socialMedia/instagram.svg"},{name:"telegram",href:"https://www.telegram.org",img:"Footer/socialMedia/telegram.svg"}],adress:"Москва, ул. Салтыковская, 6 стр 11",email:"zakaz@ggpromarket.ru",rate:{href:"#",imgUrl:"/Footer/rate/yandex.png",alt:"yandex"}};function $e(){const{data:s,isSuccess:a,isError:x,error:_,isLoading:c}=M(null),{data:d,isSuccess:u,isError:g,error:l,isLoading:h}=X(null),r=a?s.callNumber:"",i=u?d:ye;return e.jsx(e.Fragment,{children:e.jsx("div",{className:n.FooterMain,children:e.jsx(B,{children:e.jsxs("div",{className:n.FooterMain__wrapper,children:[e.jsxs("div",{className:n.FooterMain__list,children:[e.jsxs("ul",{className:n.FooterMain__ul,children:[u?i.productLinks.map(o=>e.jsx("li",{className:n.FooterMain__item,children:e.jsxs("a",{href:o.href,children:[o.name," "]})},o.name)):null,h?e.jsx("li",{children:"Загрузка..."}):null,g?e.jsxs("li",{children:["Ошибка загрузки: ",JSON.stringify(l)]}):null]}),e.jsx(b,{width:"214px",height:"24px"}),e.jsx("div",{className:n.FooterMain__copyright,children:"© 2025 MadeX1X"})]}),e.jsx("div",{className:n.FooterMain__list,children:e.jsxs("ul",{className:n.FooterMain__ul,children:[u?i.infoLinks.map(o=>e.jsx("li",{className:n.FooterMain__li,children:e.jsx("a",{href:o.href,children:o.name})},o.name)):null,h?e.jsx("li",{children:"Загрузка..."}):null,g?e.jsxs("li",{children:["Ошибка загрузки: ",JSON.stringify(l)]}):null]})}),e.jsxs("div",{className:n.FooterMain__contacts,children:[a?e.jsxs(e.Fragment,{children:[e.jsx(D,{number:Number(r)}),e.jsx("a",{href:`tel:${r}`,className:n.FooterMain__callButton,children:"Заказать звонок"})," "]}):null,u?e.jsxs(e.Fragment,{children:[e.jsxs("ul",{className:n.FooterMain__workHours,children:[e.jsx("li",{className:n.FooterMain__workHours__item,children:"Пн-Пт: 10:00 — 20:00"}),e.jsx("li",{className:n.FooterMain__workHours__item,children:"Сб: 10:00 — 18:00"}),e.jsx("li",{className:n.FooterMain__workHours__item,children:"Вс: выходной"})]}),e.jsx("div",{className:n.FooterMain__socialMedia,children:i.socialMediaLinks.map(o=>e.jsx("a",{className:n.FooterMain__socialMedia__item,href:o.href,children:e.jsx("img",{src:o.img})},o.name))})]}):null]}),e.jsxs("div",{className:n.FooterMain__adress,children:[u?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:n.FooterMain__adress__text,children:"Склад:"}),e.jsx("p",{className:n.FooterMain__adress,children:i.adress}),e.jsx("a",{href:`mailto:${i.email}`,className:n.FooterMain__email,children:i.email}),e.jsx("a",{href:i.rate.href,className:n.FooterMain__rate,children:e.jsx("img",{className:n.FooterMain__rate__img,src:i.rate.imgUrl,alt:i.rate.alt})})]}):null,h?e.jsx("li",{children:"Загрузка..."}):null,g?e.jsxs("div",{className:n.Footer__error,children:["Ошибка загрузки: ",JSON.stringify(l)]}):null]})]})})})})}const qe="_FooterBottom_s3bxy_1",Ae="_FooterBottom__inlineLink_s3bxy_12",k={FooterBottom:qe,FooterBottom__inlineLink:Ae};function He(){return e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsxs("div",{className:k.FooterBottom,children:[e.jsx("p",{children:"Данный сайт является учебным пет-проектом и создан исключительно в демонстрационных целях. Он не предназначен для ведения реальной коммерческой деятельности, продажи товаров или оказания услуг. Вся информация, представленная на сайте, включая цены, описания товаров и услуги, носит исключительно иллюстративный характер и не должна восприниматься как предложение или призыв к покупке."}),e.jsx("br",{}),e.jsxs("p",{children:["Сайт использует технологию cookie. Используя сайт, Вы соглашаетесь с",e.jsx("a",{href:"#",className:k.FooterBottom__inlineLink,children:"правилами использования cookie"})," ",", а также даете"," ",e.jsx("a",{href:"#",className:k.FooterBottom__inlineLink,children:"согласие на обработку персональных данных"}),"."]})]})})})}function De(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:Ne.Footer,children:[e.jsx($e,{}),e.jsx(He,{})]})})}const Ie=$(function(){return e.jsxs(e.Fragment,{children:[e.jsx(Fe,{}),e.jsx(q,{}),e.jsx(De,{})]})});export{Ie as default};
