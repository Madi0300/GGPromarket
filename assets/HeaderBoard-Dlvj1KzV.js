const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Footer-Hj-hd-nn.js","assets/chunk-UH6JLGW7-BuU8Z2XH.js","assets/ui-DakXsL72.js","assets/ui-BUsB4K1L.css","assets/preload-helper-CR-aIV2P.js","assets/apiSlise-DyPyVMm8.js","assets/hooks-ZVFlrzEq.js","assets/clientStates-2epOhWx_.js","assets/Footer-DGnc_KPE.css"])))=>i.map(i=>d[i]);
import{_ as B}from"./preload-helper-CR-aIV2P.js";import{p as e,a as c,v as S,w,O as b}from"./chunk-UH6JLGW7-BuU8Z2XH.js";import{L as G,C as A,D as L,a as $}from"./ui-DakXsL72.js";import{u as q,b as y}from"./apiSlise-DyPyVMm8.js";import{u as N,a as I}from"./hooks-ZVFlrzEq.js";import"./clientStates-2epOhWx_.js";const D="_header_4fqhq_1",R="_header__wrapper_4fqhq_12",C={header:D,header__wrapper:R},H="_TopBar_1c58q_2",X="_City_1c58q_26",E="_Navigation__Nav_1c58q_46",F="_Navigation__Burger_1c58q_57",Y="_underlined_1c58q_78",x={TopBar:H,City:X,Navigation__Nav:E,Navigation__Burger:F,underlined:Y},M="_Navigation_1643p_1",T="_Navigation__wrapper_1643p_24",P="_Navigation__ul_1643p_28",O="_Navigation__li_1643p_31",Q="_Navigation__link_1643p_36",z="_Navigation__close_1643p_44",p={Navigation:M,Navigation__wrapper:T,Navigation__ul:P,Navigation__li:O,Navigation__link:Q,Navigation__close:z};function V({navItems:n,toggleIsdropdownOpen:s}){return e.jsx("div",{className:p.Navigation__wrapper,children:e.jsxs("nav",{className:p.Navigation,children:[e.jsx("ul",{className:p.Navigation__ul,children:n.map(a=>e.jsx("li",{className:p.Navigation__li,children:e.jsx("a",{className:p.Navigation__link,href:a.href,children:a.name},a.name)},a.name))}),e.jsxs("div",{className:p.Navigation__close,onClick:s,children:[e.jsx("span",{className:p.Navigation__close__span}),e.jsx("span",{className:p.Navigation__close__span})]})]})})}function J(){const n=j.currentLocation,s=j.callNumber;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:x.TopBar,children:[e.jsx(G,{}),e.jsx(K,{city:n}),e.jsx(A,{number:s}),e.jsx(U,{})]})})}function K({city:n="Москва"}){return e.jsx(e.Fragment,{children:e.jsxs("a",{className:x.City,href:"#",children:[e.jsx("img",{className:x.City__icon,src:"/GGPromarket/header/location-icon.svg"}),e.jsx("span",{className:x.underlined,children:n})]})})}function U(){const n=[{name:"Каталог",href:"/catalog"},{name:"Доставка",href:"/order"},{name:"Скидки",href:"/discounts"},{name:"Бренды",href:"/brands"},{name:"Контакты",href:"/contacts"}],[s,a]=c.useState(!1);function o(i){a(!s)}return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,className:x.Navigation__Burger,"aria-expanded":s,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),s?e.jsx(V,{navItems:n,toggleIsdropdownOpen:o}):null,e.jsx("div",{className:x.Navigation__Nav,children:n.map(i=>e.jsx("a",{href:i.href,className:x.Navigation__item,children:i.name},i.name))})]})}const W="_HeaderMiddle_1ql5a_1",Z="_HeaderMiddle__cartSum_1ql5a_6",ee="_Categories_1ql5a_19",te="_Categories__title_1ql5a_51",ne="_Categories__one_1ql5a_60",se="_Categories__burger_1ql5a_84",ae="_Categories__two_1ql5a_97",oe="_Categories__three_1ql5a_101",ie="_Search_1ql5a_106",re="_Search__form_1ql5a_126",ce="_Search__input_1ql5a_136",_e="_ActionButtons_1ql5a_144",le="_ActionButtons__button_1ql5a_177",de="_ActionButtons__eliplse_1ql5a_183",ue="_ActionButtons__button__notification__sum_1ql5a_188",me="_LikedGoods_1ql5a_225",he="_LikedGoods__list_1ql5a_242",ge="_LikedGoods__item_1ql5a_246",t={HeaderMiddle:W,HeaderMiddle__cartSum:Z,Categories:ee,Categories__title:te,Categories__one:ne,Categories__burger:se,Categories__two:ae,Categories__three:oe,Search:ie,Search__form:re,Search__input:ce,ActionButtons:_e,ActionButtons__button:le,ActionButtons__eliplse:de,ActionButtons__button__notification__sum:ue,LikedGoods:me,LikedGoods__list:he,LikedGoods__item:ge};function fe(){const n=N(d=>d.clientState.likedItems),s=N(d=>d.clientState.cartItems),[a,o]=c.useState(!1),[i,_]=c.useState(!1),[l,h]=c.useState({like:{X:0,Y:0},cart:{X:0,Y:0}}),{data:m}=q(null),g=c.useMemo(()=>{if(!m)return 0;const d=m;return s.reduce((r,u)=>{const f=d.find(v=>v.id===u);return f?r+f.price:r},0)},[s,m]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.HeaderMiddle,children:[e.jsx(pe,{}),e.jsx(xe,{}),e.jsx(ve,{setButtonCords:h,setIsCartButtonTouched:_,setIsLikesButtonTouched:o,isLikesButtonTouched:a,isCartButtonTouched:i}),a?e.jsx(k,{cords:l.like,itemsId:n}):null,i?e.jsxs(e.Fragment,{children:[e.jsx(k,{cords:l.cart,itemsId:s}),e.jsxs("div",{className:t.HeaderMiddle__cartSum,style:{position:"absolute",left:`${l.cart.X-300}px`,top:`${l.cart.Y-40}px`},children:["Общий счет: ",g,"₽"]})]}):null]})})}function pe(){const[n,s]=c.useState(!1),a=j.productCatalog,[o,i]=c.useState({X:0,Y:0}),_=c.useRef(null),l=c.useRef(null);c.useEffect(()=>{if(!n)return;function m(g){var r,u;const d=g.target;(r=_.current)!=null&&r.contains(d)||(u=l.current)!=null&&u.contains(d)||s(!1)}return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[n]);function h(m){if(m.preventDefault(),!l.current)return;const g=!n;if(g){const d=l.current.getBoundingClientRect();i({X:d.left+window.scrollX,Y:d.bottom+window.scrollY})}s(g)}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.Categories,children:[e.jsxs("div",{className:`${t.Categories__one} ${n?t.active:""}`,children:[e.jsxs("button",{"aria-expanded":n,onClick:h,className:t.Categories__burger,ref:l,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(L,{ref:_,items:a,cords:o,isOpen:n,position:"right"}),e.jsx("p",{className:`${t.Categories__one__name} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Каталог товаров"})})]}),e.jsx("div",{className:`${t.Categories__two} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Акции"})}),e.jsx("div",{className:`${t.Categories__three} ${t.Categories__title}`,children:e.jsx("a",{href:"#",children:"Магазины"})})]})})}function xe(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:t.Search,children:e.jsxs("form",{className:t.Search__form,action:"#/",method:"get",children:[e.jsx("input",{type:"text",name:"search-text",className:t.Search__input,placeholder:"Поиск по сайту"}),e.jsx("button",{type:"submit",className:t.Search__button,children:e.jsx("img",{src:"/GGPromarket/header/search-icon.svg",alt:""})})]})})})}function ve({setButtonCords:n,setIsCartButtonTouched:s,setIsLikesButtonTouched:a,isLikesButtonTouched:o,isCartButtonTouched:i}){I();const _=c.useRef(null),l=c.useRef(null),h={liked:N(r=>r.clientState.likedItems).length,cart:N(r=>r.clientState.cartItems).length};function m(r){return e.jsxs("div",{className:t.ActionButtons__button__notification,children:[e.jsx("img",{className:t.ActionButtons__eliplse,src:"/GGPromarket/header/elipse.svg",alt:""}),e.jsx("span",{className:t.ActionButtons__button__notification__sum,children:r})]})}function g(r){var f;if(r.preventDefault(),!_.current)return;const u=(f=_.current)==null?void 0:f.getBoundingClientRect();u&&(n(v=>({...v,like:{X:u.left+window.scrollX,Y:u.bottom+window.scrollY}})),a(!o))}function d(r){var f;if(r.preventDefault(),!l.current)return;const u=(f=l.current)==null?void 0:f.getBoundingClientRect();u&&(n(v=>({...v,cart:{X:u.left+window.scrollX,Y:u.bottom+window.scrollY}})),s(!i))}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.ActionButtons,children:[e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",children:[null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/userButton.svg",alt:""})]})}),e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:_,onClick:g,children:[h.liked>0?m(h.liked):null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/likedButton.svg",alt:""})]})}),e.jsx("div",{className:t.ActionButtons__button,children:e.jsxs("a",{href:"#",ref:l,onClick:d,children:[h.cart>0?m(h.cart):null,e.jsx("img",{className:t.ActionButtons__button__icon,src:"/GGPromarket/header/cartButton.svg",alt:""})]})})]})})}function Ne({id:n}){const{data:s,isSuccess:a}=y(n),o=S();if(!a)return null;function i(_){_.preventDefault(),o(`/product/${n}`,{preventScrollReset:!0})}return e.jsx("li",{className:t.LikedGoods__item,children:e.jsx("a",{className:t.LikedGoods__item__link,href:s.href,onClick:i,children:s.name})})}function k({itemsId:n,cords:s}){const a=n&&n.length>0,o=c.useRef(null),i={top:s.Y,left:s.X-320};return c.useEffect(()=>{if(!o.current)return;o.current.getBoundingClientRect().left<0&&(o.current.style.left="0px")}),e.jsx("div",{ref:o,style:i,className:t.LikedGoods,children:a?e.jsx("ul",{className:t.LikedGoods__list,children:n.map(_=>e.jsx(Ne,{id:_},_))}):e.jsx("p",{children:"Список понравившихся товаров пуст."})})}const j={currentLocation:"Москва",callNumber:81231231223,productCatalog:[{name:"Сантехника",href:"/santehnika"},{name:"Смесители",href:"/smesiteli"},{name:"Душевые системы",href:"/dusevie-sistemy"},{name:"Ванны и душевые кабины",href:"/vanny-i-dusevie-kabiny"},{name:"Кухонные мойки",href:"/kuhovie-myki"},{name:"Аксессуары",href:"/aksesuary"},{name:"Инженерная сантехника",href:"/ingeniernaya-santehnika"}]};function je(){return e.jsx(e.Fragment,{children:e.jsx("header",{className:C.header,children:e.jsx("div",{className:C.header__wrapper,children:e.jsxs($,{children:[e.jsx(J,{}),e.jsx(fe,{})]})})})})}const Ce=c.lazy(()=>B(()=>import("./Footer-Hj-hd-nn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ae=w(function(){return e.jsxs(e.Fragment,{children:[e.jsx(je,{}),e.jsx(b,{}),e.jsx(Ce,{})]})});export{Ae as H,j as h};
