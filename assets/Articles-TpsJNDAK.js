import{a as o,p as t,v as f}from"./chunk-UH6JLGW7-C5_N2qaM.js";import{T as b}from"./home-D5f2UMRl.js";import{g as h}from"./apiSlise-DkzWnf8z.js";import"./preload-helper-CR-aIV2P.js";import"./ui-C_hnAzDc.js";const x="_Articles_nq09n_1",j="_Articles__buttons_nq09n_5",p="_Articles__buttonLeft_nq09n_9",I="_Articles__buttonRight_nq09n_9",C="_Articles__buttonImg_nq09n_31",v="_Articles__error_nq09n_34",N="_Articles__loading_nq09n_37",q="_Articles__slider_nq09n_41",G="_ArticleCard_nq09n_53",y="_ArticleCard__title_nq09n_81",r={Articles:x,Articles__buttons:j,Articles__buttonLeft:p,Articles__buttonRight:I,Articles__buttonImg:C,Articles__error:v,Articles__loading:N,Articles__slider:q,ArticleCard:G,ArticleCard__title:y};function W(){const{data:l,isSuccess:_,isError:c,error:s,isLoading:m}=h(null),a=_?l:null,i=o.useRef(null),u=e=>{const n=i.current;if(!n)return;const d=n.querySelector(`.${r.ArticleCard}`),A=20,g=d?d.offsetWidth:370;n.scrollBy({left:e==="right"?g+A:-(g+A),behavior:"smooth"})};return t.jsxs(t.Fragment,{children:[t.jsx(b,{description:"Статьи"}),_?t.jsxs("div",{className:r.Articles,children:[t.jsx("div",{ref:i,className:r.Articles__slider,children:a.map(e=>t.jsx(k,{item:e,scrollEl:i},e.id))}),t.jsxs("div",{className:r.Articles__buttons,children:[t.jsx("button",{type:"button",onClick:()=>u("left"),className:r.Articles__buttonLeft,children:t.jsx("img",{className:r.Articles__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})}),t.jsx("button",{type:"button",onClick:()=>u("right"),className:r.Articles__buttonRight,children:t.jsx("img",{className:r.Articles__buttonImg,src:"/GGPromarket/Goods/arrow.svg",alt:"arrow"})})]})]}):null,m?t.jsx("div",{className:r.Articles__loading,children:"Загрузка..."}):null,c?t.jsxs("div",{className:r.Articles__error,children:["Ошибка загрузки статей:"," ",s&&"status"in s?s.status:s.message]}):null]})}function k({item:l,scrollEl:_}){const c=o.useRef(null),[s,m]=o.useState(!1),[a,i]=o.useState(!1),u="/GGPromarket/Articles/defaultImg.webp";return o.useEffect(()=>{if(s||!c.current)return;const e=c.current,n=new IntersectionObserver(d=>{const[A]=d;A.isIntersecting&&(m(!0),n.unobserve(e))},{root:_.current,rootMargin:"300px",threshold:.1});n.observe(e)}),t.jsx(t.Fragment,{children:t.jsxs(f,{ref:c,to:l.link,className:r.ArticleCard,children:[s?t.jsx("img",{className:r.ArticleCard__img,src:a?u:l.imgUrl,alt:l.title,onError:()=>{a||(console.log("ddd"),i(!0))}}):null,t.jsx("h4",{className:r.ArticleCard__title,children:l.title})]})})}export{W as default};
